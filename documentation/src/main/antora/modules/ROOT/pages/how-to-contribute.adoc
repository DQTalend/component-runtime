= Contributing to Talend Component Kit documentation
:page-talend_skipindexation:
:page-talend_stage: draft

This document explains how Asciidoctor is used in the context of Talend Component Kit as well as the specific processes in place.

For general guidelines about Asciidoctor, refer to the https://asciidoctor.org/docs/asciidoc-syntax-quick-reference[Asciidoc Syntax quick reference] page.

== List of metadata attributes

For all pages:

* `:page-partial` indicates that the current .adoc file can be included in another document using an `include::`. This attribute has no value.
* `:page-talend_skipindexation:` indicates that the current .adoc file must not be indexed. This attribute has no value. Add it to files that should not be returned in the search, like index files that only contain includes.
* `:description:` is the meta description of the file. Each .adoc file is rendered as an HTML file.
* `:keywords:` is the list of meta keywords relevant for the current .adoc file. Separate keywords using simple commas.
* `:page-talend_stage: draft` indicates that the current document is a draft and is not final even if published. It triggers the display of a small banner indicating the status of the page. Remove this attribute once the page is final.

For pages that should appear as a tile on the index page:

* `:page-documentationindex-index:` is the weight of the page. A low weight indicates that the page should be one of the first tiles to appear. A high weight will push the tile towards the end of the list in the index page.
* `:page-documentationindex-label:` is the title of the tile in the index page.
* `:page-documentationindex-icon:` is the icon of the tile in the index page. The value of this attribute should be the name of a free icon on fontawesome.
* `:page-documentationindex-description:` is a short description of the page that will be displayed in the tile under its title.

For pages containing API descriptions:

* `:page-talend_swaggerui: true` indicates that the page contains some API reference that should be displayed using Swagger UI

== Conditionality regarding output formats

The Talend Component Kit documentation is published as HTML and PDF. Links can be troublesome in some cases, making pure lists of links (such as "Related links" sections) rather useless in the PDF output.

To avoid this, it is possible to define some conditionality to have some content only displaying in one of the output formats only. For example:

[source]
----
ifeval::["{backend}" == "html5"]
[role="relatedlinks"]
== Related articles
- xref:tutorial-generate-project-using-starter.adoc[Generating a project using the starter]
- xref:component-configuration.adoc[Defining component layout and configuration]
- xref:tutorial-configuration-sensitive-data.adoc[Masking sensitive data]
- xref:best-practices.adoc[Best practices]
endif::[]
----

== Adding images

All images are stored under documentation > src > main > antora > modules > ROOT > assets > images.
Relatively to .adoc files, it can be ../assets/images/ or ../../assets/images for _partials (automatically generated from code) pages.
To avoid handling different relative paths, a variable is available and resolves directly `image:` to the *image* folder. Hence, paths to images should start with the following:

`image:(<subfolder>/)<image_name>.png[<image_name>(,parameters)]`

If there is no subfolder, type the image name right away.
Adding an image title is mandatory to avoid empty broken spaces in the content.
If necessary, you can add more parameters separated by a comma between the same brackets as the image title, such as the desired width, height, etc.

== Tables

In a general manner, avoid using tables if there are other solutions available. This is especially the case for complex tables that include assets or big code samples can lead to display issues.

.Table example
[role="table-striped table-hover table-ordered",options="header,autowidth"]
|====
|API|Type|Description

|@o.t.s.c.api.service.completion.DynamicValues|dynamic_values|Mark a method as being useful to fill potential values of a string option for a property denoted by its value. You can link a field as being completable using @Proposable(value). The resolution of the completion action is then done through the component family and value of the action. The callback doesn't take any parameter.

|@o.t.s.c.api.service.healthcheck.HealthCheck|healthcheck|This class marks an action doing a connection test

|====

== Sample page

[source]
----
= Page title
:description: This is a sample Asciidoctor page
:keywords: Ascii, asciidoc, sample, documentation
:attribute1:
:attribute2:

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

== Section 1 title

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

=== Section 2 title

Some *bold* or _italic_ or `command` to highlight specific parts of the content

.Some code block (remove the extra \ characters)
[source]
\----
some code
for my
code codeblock
    with indentation
    if needed
\----

=== Section 2 title

image:my_image.png[The image,300]

.Table title for a table with 2 columns that contain images
[cols="1a,1a",role="table gallery table-striped",options="header,autowidth"]
|===
|Studio Rendering | Web Rendering

|image::gallery/widgets/studio/list.png[Studio List,window="_blank",link="_images/gallery/widgets/studio/list.png"]
|image::gallery/widgets/web/list.png[Web List,window="_blank",link="_images/gallery/widgets/web/list.png"]
|===

== Section 1 title

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

ifeval::["{backend}" == "html5"]
[role="relatedlinks"]
== Section 1 title only displaying in HTML
- xref:file1.adoc[Xref1 only displaying in HTML]
- xref:file2.adoc[Xref2 only displaying in HTML]
endif::[]

----
