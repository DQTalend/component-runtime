= Integrating components into Talend Studio
:page-partial:
:description: How to install and configure components developed with Talend Component Kit in Talend Open Studio
:keywords: component server, deploy, install

You can integrate components developed using Talend Component Kit to link:https://sourceforge.net/projects/talend-studio/[Talend Studio].

image::tutorial_build_job_run.png[Job run]

== Version compatibility

The version of Talend Component Kit you need to use to develop new components depends on the version of Talend Studio in which components will be integrated.

|===
|*Talend product*|*Talend Component Kit version*
|Studio 7.1.1|Framework until 1.1.1
|Studio 7.0.1|Framework until 0.0.5
|===

== Installing the components

Learn how to build and deploy components to Talend Studio using xref:build-tools-maven.adoc[Maven] or xref:build-tools-gradle.adoc[Gradle] Talend Component Kit plugins.

This can be done using the `deploy-in-studio` goal from your development environment.

== Configuring the component server

The Studio integration relies on the Component Server, that the Studio uses to gather data about components created using Talend Component Kit.

You can change the default configuration of component server by modifying the `$STUDIO_HOME/configuration/config.ini` file.

The following parameters are available:

|===
| Name | Description | Default
| component.environment | Enables the developer mode when set to `dev` | -
| component.debounce.timeout | Specifies the timeout (in milliseconds) before calling listeners in components Text fields | 750
| component.kit.skip | If set to `true`, the plugin is not enabled. It is useful if you don't have any component developed with the framework. | false
| component.java.arguments | Component server additional options | -
| component.java.m2 | Maven repository that the server uses to resolve components | Defaults to the global Studio configuration
| component.java.coordinates | A list of comma-separated GAV (groupId:artifactId:version) of components to register | -
| component.java.registry | A properties file with values matching component GAV (groupId:artifactId:version) registered at startup | -
| component.java.port | Sets the port to use for the server | random
| components.server.beam.active | Active, if set to true, beam support (_Experimental_). It requires beam sdk java core dependencies to be available. | false

| component.server.jul.forceConsole
a| Adds a console handler to JUL to see logs in the console. This can be helpful in development because the formatting is clearer than the OSGi one in `workspace/.metadata/.log`.

It uses the `java.util.logging.SimpleFormatter.format` property to define its format. By default, it
is `%1$tb %1$td, %1$tY %1$tl:%1$tM:%1$tS %1$Tp %2$s%n%4$s: %5$s%6$s%n`, but for development purposes
`[%4$s] %5$s%6$s%n` is simpler and more readable.

| false
|===

Here is an example of a common developer `configuration/config.ini` file:

.configuration/config.ini example
[source,properties]
----
# use local .m2 instead of embedded studio one
maven.repository = global

# during development, see developer model part
component.environment = dev

# log into the console the component interactions - optional
component.server.jul.forceConsole = true
java.util.logging.SimpleFormatter.format = [%4$s] %5$s%6$s%n
----

[[developer-mode]]
=== Enabling the developer mode

The developer mode is especially useful to iterate on your component development and to avoid closing and restarting Talend Studio everytime you make a change to a component. It adds a Talend Component Kit button in the main toolbar:

image::studio-reload-button.png[Studio Reload Button]

When clicking this button, all components developed with the Talend Component Kit framework are reloaded. The cache is invalidated and the components refreshed.

IMPORTANT: You still need to add and remove the components to see the changes.

To enable it, simply set the `component.environment` parameter to `dev` in the `config.ini` configuration file of the component server.

== Debugging your component in the Studio

=== Debugging the runtime of the component


=== Debugging UI actions and validations

=== Debugging the guess schema action

== Random port when running concurrent studio instances

If you run multiple Studio instances automatically in parallel, you can run into some issues with the random port computation. For example on a CI platform. For that purpose, you can create the  `$HOME/.talend/locks/org.talend.sdk.component.studio-integration.lock` file.

Then, when a server starts, it acquires a lock on that file and prevents another server to get a port until it is started. It ensures that you can't have two concurrent processes getting the same port allocated.

However, it is highly unlikely to happen on a desktop. In that case, forcing a different value through `component.java.port` in your `config.ini` file is a better solution for local installations.


ifeval::["{backend}" == "html5"]
[role="relatedlinks"]
== Related articles
- xref:best-practices.adoc[Best practices]
- xref:build-tools-maven.adoc[Building components with Maven]
- xref:build-tools-gradle.adoc[Building components with Gradle]
endif::[]
